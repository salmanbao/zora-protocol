# Building Token Metadata 

Each token in a Zora 1155 or 721 contract has a metadata uri field which points to a JSON Metadata file, pinned to [IPFS](https://ipfs.tech/), 
containing information about the media associated with the token as well as additional descriptive info. The Zora Protocol SDK provides 
some utility methods to help build the JSON metadata needed  for tokens.  It does not provide an endpoint for pinning 
the JSON metadata to IPFS.  

This guide will show how to use the SDK to build the metadata and pin it to IPFS using your preferred IPFS pinning 
method.

The general structure of Token Metadata is defined in a type exported from the SDK, `TokenMetadataJson`:

```ts twoslash
type TokenMetadataJson = {
  name: string;
  description?: string;
  /** Primary image file */
  image?: string;
  animation_url?: string | null;
  content?: {
    mime: string;
    uri: string;
  } | null;
  attributes?: {
    trait_type: string;
    value: string;
  };
};
```

## Building Token Metadata using SDK helper methods

The Zora Protocol SDK provides a utility to build JSON metadata for a token with the helper method 
`makeMediaTokenMetadata()`.  Note that the media must be pinned to IPFS outside of this function call.  Once the token metadata is generated by this function, 
it must be  pinned to IPFS. The Zora Protocol SDK doesn't provide a pinning service, but this example will show
how to pin the necessary assets and corresponding json metadata using [Pinata](https://docs.pinata.cloud/pinning/pinning-files)

:::code-group

```ts twoslash [example.ts]
// @filename: pinata.ts
// [!include ~/snippets/protocol-sdk/ipfs/pinata.ts]

// @filename: example.ts
// ---cut---
// [!include ~/snippets/protocol-sdk/ipfs/imagepinata.ts]
```

```ts twoslash [pinata.ts]
// [!include ~/snippets/protocol-sdk/ipfs/pinata.ts]
```

:::

## Building Metadata for Text NFTs

Zora Text NFTs have text for the token media, and look like the following:

```json 
{
  "name": "My Text NFT",
  "content": {
    "mime": "text/plain",
    "uri": "{text file url}"
  },
  "image": "{text preview thumbnail image url}",
  "animation_url": "{text file url}"
}
```

The Zora Protocol SDK provides helper methods to create the files and build the metadata json needed for text NFTs.

The function `generateTextNftMetadataFiles()` takes in a string for the `text`, and returns a `name`, `mediaUrlFile` which is a `.txt` file containing the text,
and a `thumbnailUrl` which is a generated thumbnail image file with part of the text drawn into it.


```ts twoslash
import { generateTextNftMetadataFiles} from '@zoralabs/protocol-sdk';

const { 
  name, 
  mediaUrlFile, 
  thumbnailFile
} = await generateTextNftMetadataFiles("Hello, World!");
```

Once the files are generated, they must be pinned to IPFS gateway. With the ipfs urls of those files, the final metadata json 
can be built and pinned to IPFS. Here's an example using the [Pinata](https://docs.pinata.cloud/pinning/pinning-files) as an IPFS pinning service:

:::code-group

```ts twoslash [example.ts]
// @filename: pinata.ts
// [!include ~/snippets/protocol-sdk/ipfs/pinata.ts]

// @filename: example.ts
// ---cut---
// [!include ~/snippets/protocol-sdk/ipfs/textpinata.ts]
```

```ts twoslash [pinata.ts]
// [!include ~/snippets/protocol-sdk/ipfs/pinata.ts]
```

:::


